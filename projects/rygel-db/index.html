<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>RygelDB - apiercey.github.io</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon.png><link rel=stylesheet href=/css/style.min.b5158346cd0be7c685bb4907526f1b697a94560681b975b89e813e6095001706.css><meta name=description content="&#34;What the Yotz?!&#34; - A NoSQL document store implemented in Go."><meta property="og:title" content="RygelDB"><meta property="og:type" content="website"><meta property="og:url" content="/projects/rygel-db/"><meta property="og:image" content="/images/space-cerqueira.jpg"><meta property="og:description" content="&#34;What the Yotz?!&#34; - A NoSQL document store implemented in Go."><meta name=twitter:card content="summary"><meta name=twitter:site content="@example"><meta name=twitter:creator content="@example"><link rel=preconnect href=https://fonts.gstatic.com><link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet></head><body class='page page-default-single'><div id=menu-main-mobile class=menu-main-mobile><ul class=menu><li class=menu-item-about><a href=/pages/about/>About</a></li><li class=menu-item-blog><a href=/posts/>Blog</a></li><li class=menu-item-projects><a href=/projects/>Projects</a></li><li class=menu-item-articles><a href=/articles/>Articles</a></li></ul></div><div id=wrapper class=wrapper><div class=header><a class=header-logo href=/>apiercey.github.io</a><div class=menu-main><ul><li class=menu-item-about><a href=/pages/about/><span>About</span></a></li><li class=menu-item-blog><a href=/posts/><span>Blog</span></a></li><li class="menu-item-projects active"><a href=/projects/><span>Projects</span></a></li><li class=menu-item-articles><a href=/articles/><span>Articles</span></a></li></ul></div><div id=toggle-menu-main-mobile class=hamburger-trigger><button class=hamburger>Menu</button></div></div><div class=intro><h1>RygelDB<span class=dot>.</span></h1><img src=/images/space-cerqueira.jpg></div><div class=content><p>RygelDB
<a href=https://github.com/APiercey/RygelDB>RygelDB</a> is a NoSQL document store using commands to store and query documents!</p><blockquote><p>What the Yotz?! - Dominar Rygel the XVI</p></blockquote><ul><li><a href=#usage>Usage</a></li><li><a href=#storing-and-querying-data>Storing and Querying Data</a></li><li><a href=#defining-collections>Defining Collections</a></li><li><a href=#removing-collections>Removing Collections</a></li><li><a href=#storing-data>Storing Data</a></li><li><a href=#querying-data>Querying data</a></li><li><a href=#remove-data>Remove data</a></li><li><a href=#update-data>Update data</a></li><li><a href=#where-predicates>Where Predicates</a></li></ul><h2 id=usage>Usage</h2><p>Run <code>go run .</code> or <code>go build .</code>, as you like.</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a></span><span>$ go run .
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2>2</a></span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3>3</a></span><span>Starting tcp server on localhost:8080
</span></span></code></pre></div><p>You can connect using a socket once it has started like so:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a></span><span>nc localhost 8080
</span></span></code></pre></div><h2 id=storing-and-querying-data>Storing and Querying Data</h2><p>Rygel stores JSON document items in collections.</p><p>All commands can be sent over socket. To test them individually, you may pipe time:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a></span><span><span style=color:#ff5c57>echo</span> <span style=color:#5af78e>&#39;{ &#34;operation&#34;: &#34;DEFINE COLLECTION&#34;, &#34;collection_name&#34;: &#34;test_collection&#34; }&#39;</span> | nc localhost <span style=color:#ff9f43>8080</span>
</span></span></code></pre></div><h2 id=defining-collections>Defining Collections</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;DEFINE COLLECTION&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;collection_name&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-4>4</a></span><span>}
</span></span></code></pre></div><p>Creates a new collection where document items may be stored.</p><h2 id=removing-collections>Removing Collections</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;REMOVE COLLECTION&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;collection_name&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-4>4</a></span><span>}
</span></span></code></pre></div><p>Removes a collection from the datbase. This removes all stored JSON document items within it.</p><h2 id=storing-data>Storing Data</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;STORE&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;collection_name&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-4>4</a></span><span>  <span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> {<span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;structure of document&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-5>5</a></span><span>}
</span></span></code></pre></div><p>Stores a document item in a collection. Data can be any valid JSON structure.</p><h2 id=querying-data>Querying data</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;FETCH&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;collection_name&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-4>4</a></span><span>  <span style=color:#5af78e>&#34;limit&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#ff9f43>1</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-5>5</a></span><span>  <span style=color:#5af78e>&#34;where&#34;</span><span style=color:#ff6ac1>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-6>6</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;foo&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;=&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;new value&#34;</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-7>7</a></span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-8>8</a></span><span>}
</span></span></code></pre></div><p>Queries for data in a collection. The <code>limit</code> parameter is optional and if provided, will stop looking for items after it has reached it&rsquo;s limit.</p><p>Rygel can query for data based on certain criteria, named where predicates. Each where predicate is defined used:</p><ul><li><code>path</code> an array of keys, with each key being a step into a nested structure. The value for the last key is used in the comparison.</li><li><code>operator</code> how the value is compared.</li><li><code>value</code> what the value is expected to be to match.</li></ul><p>Given the following data:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1> 1</a></span><span>{
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2> 2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;DEFINE COLLECTION&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-3> 3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-4> 4</a></span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-5> 5</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-6> 6</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;STORE&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-7> 7</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-8> 8</a></span><span>  <span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> {<span style=color:#5af78e>&#34;key&#34;</span><span style=color:#ff6ac1>:</span><span style=color:#5af78e>&#34;apple&#34;</span>,<span style=color:#5af78e>&#34;color&#34;</span><span style=color:#ff6ac1>:</span><span style=color:#5af78e>&#34;red&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-9> 9</a></span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-10>10</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-11>11</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;STORE&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-12>12</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-13>13</a></span><span>  <span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> {<span style=color:#5af78e>&#34;key&#34;</span><span style=color:#ff6ac1>:</span><span style=color:#5af78e>&#34;orange&#34;</span>,<span style=color:#5af78e>&#34;color&#34;</span><span style=color:#ff6ac1>:</span><span style=color:#5af78e>&#34;orange&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-14>14</a></span><span>}
</span></span></code></pre></div><p>Querying for a single document would look like:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;FETCH&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-4>4</a></span><span>  <span style=color:#5af78e>&#34;limit&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#ff9f43>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-5>5</a></span><span>}
</span></span></code></pre></div><blockquote><p>[{&ldquo;color&rdquo;:&ldquo;orange&rdquo;,&ldquo;key&rdquo;:&ldquo;orange&rdquo;}]</p></blockquote><p>Querying for all documents that meet a criteria:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;FETCH&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-4>4</a></span><span>  <span style=color:#5af78e>&#34;where&#34;</span><span style=color:#ff6ac1>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-5>5</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;color&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;=&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;red&#34;</span> },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-6>6</a></span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-7>7</a></span><span>}
</span></span></code></pre></div><blockquote><p>[{&ldquo;color&rdquo;:&ldquo;red&rdquo;,&ldquo;key&rdquo;:&ldquo;apple&rdquo;}]</p></blockquote><p>It&rsquo;s possible to query based on deep properties and multiple WHERE clauses:</p><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1> 1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-2> 2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;STORE&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-3> 3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-4> 4</a></span><span>  <span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-5> 5</a></span><span>    <span style=color:#5af78e>&#34;key&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;dragonfruit&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-6> 6</a></span><span>    <span style=color:#5af78e>&#34;color&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;red&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-7> 7</a></span><span>    <span style=color:#5af78e>&#34;properties&#34;</span><span style=color:#ff6ac1>:</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-8> 8</a></span><span>      <span style=color:#5af78e>&#34;spikes&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;many&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-9> 9</a></span><span>      <span style=color:#5af78e>&#34;internal_color&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;white&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-10>10</a></span><span>    }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-11>11</a></span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-12>12</a></span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-13>13</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-14>14</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;FETCH&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-15>15</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;fruits&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-16>16</a></span><span>  <span style=color:#5af78e>&#34;where&#34;</span><span style=color:#ff6ac1>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-17>17</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;color&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;=&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;red&#34;</span> },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-18>18</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;properties&#34;</span>, <span style=color:#5af78e>&#34;internal_color&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;=&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;white&#34;</span> },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-19>19</a></span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-20>20</a></span><span>}
</span></span></code></pre></div><blockquote><p>[{&ldquo;color&rdquo;:&ldquo;red&rdquo;,&ldquo;key&rdquo;:&ldquo;dragonfruit&rdquo;,&ldquo;properties&rdquo;:{&ldquo;internal_color&rdquo;:&ldquo;white&rdquo;,&ldquo;spikes&rdquo;:&ldquo;many&rdquo;}}]</p></blockquote><h2 id=remove-data>Remove data</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;REMOVE ITEMS&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;test_collection&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-4>4</a></span><span>  <span style=color:#5af78e>&#34;limit&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#ff9f43>1</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-5>5</a></span><span>  <span style=color:#5af78e>&#34;where&#34;</span><span style=color:#ff6ac1>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-6>6</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;amount&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;&gt;&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#ff9f43>1000</span> },
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-7>7</a></span><span>  ]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-8>8</a></span><span>}
</span></span></code></pre></div><p>Removes JSON document items from a collection. Limit is optional.</p><h2 id=update-data>Update data</h2><div class=highlight><pre tabindex=0 style=color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a></span><span>{ 
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-2>2</a></span><span>  <span style=color:#5af78e>&#34;operation&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;UPDATE ITEM&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-3>3</a></span><span>  <span style=color:#5af78e>&#34;collection_name&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;test_collection&#34;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-4>4</a></span><span>  <span style=color:#5af78e>&#34;limit&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#ff9f43>1</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-5>5</a></span><span>  <span style=color:#5af78e>&#34;where&#34;</span><span style=color:#ff6ac1>:</span> [
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-6>6</a></span><span>    { <span style=color:#5af78e>&#34;path&#34;</span><span style=color:#ff6ac1>:</span> [<span style=color:#5af78e>&#34;foo&#34;</span>], <span style=color:#5af78e>&#34;operator&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;=&#34;</span>, <span style=color:#5af78e>&#34;value&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;bar&#34;</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-7>7</a></span><span>  ],
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-8>8</a></span><span>  <span style=color:#5af78e>&#34;data&#34;</span><span style=color:#ff6ac1>:</span> {<span style=color:#5af78e>&#34;foo&#34;</span><span style=color:#ff6ac1>:</span> <span style=color:#5af78e>&#34;YOTZ!&#34;</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-9>9</a></span><span>}
</span></span></code></pre></div><p>Updates JSON items in a collection. Works with where predicates and limit is optional.</p><p>Note, this command <em>replaces</em> the data structure and is not an deep merge of the two data objects.</p><h2 id=where-predicates>Where Predicates</h2><p>Where predicates can compare strings, integers, and booleans.</p><p>They provide a number of different operators useful for these value types:</p><ul><li><code>=</code> asserts if the value on path is equal to the expected value.</li><li><code>!=</code> refutes if value on path is equal to the expected value.</li><li><code>></code> compares if value on path is greater than expected value.</li><li><code>>=</code> compares if value on path is greater than or equal to the expected value.</li><li><code>&lt;</code> compares if value on path is less than the expected value.</li><li><code>&lt;=</code> compares if value on path is less than or equal to the expected value.</li></ul><h1 id=todos--wishlist--ideas>TODOs / Wishlist / Ideas</h1><ul><li><input checked disabled type=checkbox> Concurrency-safe with multiple connections</li><li><input checked disabled type=checkbox> Setup Dependency-Injection strcture for the application and tests</li><li><input checked disabled type=checkbox> Move away from writing entire store to a file on every change to a &ldquo;ledger&rdquo; based persistence.</li><li><input disabled type=checkbox> Document project architecture and implementation.</li><li><input disabled type=checkbox> Possible move project structure to the <a href=https://github.com/golang-standards/project-layout>Standard Go-Lang Layout</a> if it grows too much</li><li><input disabled type=checkbox> Add Snapshotting to Persistence Ledgers.</li><li><input disabled type=checkbox> Add Indices/quick key lookups for nested data structures.</li><li><input disabled type=checkbox> Allow SocketServer to be configurable (e.g. change port binding)</li><li><input disabled type=checkbox> Allow for concurrent Read Operations between connections</li><li><input disabled type=checkbox> Allow for concurrent Write Operations between connections</li></ul><hr><blockquote><p>May your afterlife be almost as pleasant as mine. - Dominar Rygel the XVI</p></blockquote></div><div class=footer><div class=footer-social><span class="social-icon social-icon-github"><a href=https://github.com/apiercey title=github target=_blank rel=noopener><img src=/images/social/github.svg width=24 height=24 alt=github></a></span>
<span class="social-icon social-icon-linkedin"><a href=https://www.linkedin.com/in/alexander-butt-piercey title=linkedin target=_blank rel=noopener><img src=/images/social/linkedin.svg width=24 height=24 alt=linkedin></a></span></div></div></div><script type=text/javascript src=/js/bundle.min.28d149c65e8b43f935b5da6797544f9e363170785f466641db0d007cee894169.js></script></body></html>