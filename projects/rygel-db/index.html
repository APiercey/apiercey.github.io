<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="ie=edge">
<title>RygelDB - apiercey.github.io</title>
<meta name=viewport content="width=device-width,initial-scale=1">
<link rel=icon href=/favicon.png>
<link rel=stylesheet href=/css/style.min.4b2bfb3701049fe0da3e8d6b9d15186ba1dc7e294f0be3e2bca21bb8a330f5dd.css>
<meta name=description content="&#34;What the Yotz?!&#34; - A NoSQL document store implemented in Go.">
<meta property="og:title" content="RygelDB">
<meta property="og:type" content="website">
<meta property="og:url" content="/projects/rygel-db/">
<meta property="og:image" content="/images/space-cerqueira.jpg">
<meta property="og:description" content="&#34;What the Yotz?!&#34; - A NoSQL document store implemented in Go.">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@example">
<meta name=twitter:creator content="@example">
<link rel=preconnect href=https://fonts.gstatic.com>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel=stylesheet>
</head>
<body class="page page-default-single">
<div id=wrapper class=wrapper>
<div class=header>
<a class=header-logo href=/>apiercey.github.io</a>
<div class=menu-main>
<ul>
<li class=menu-item-about>
<a href=/pages/about/>About</a>
</li>
<li class=menu-item-blog>
<a href=/posts/>Blog</a>
</li>
<li class=menu-item-projects>
<a href=/projects/>Projects</a>
</li>
<li class=menu-item-articles>
<a href=/articles/>Articles</a>
</li>
</ul>
</div>
</div>
<div class=intro>
<h1>RygelDB<span class=dot>.</span></h1>
<img src=/images/space-cerqueira.jpg>
</div>
<div class=content>
<h1 id=rygeldb>RygelDB</h1>
<p><a href=https://github.com/APiercey/RygelDB>RygelDB</a> is a NoSQL document store using commands to store and query documents!</p>
<blockquote>
<p>What the Yotz?! - Dominar Rygel the XVI</p>
</blockquote>
<ul>
<li><a href=#usage>Usage</a></li>
<li><a href=#storing-and-querying-data>Storing and Querying Data</a></li>
<li><a href=#defining-collections>Defining Collections</a></li>
<li><a href=#removing-collections>Removing Collections</a></li>
<li><a href=#storing-data>Storing Data</a></li>
<li><a href=#querying-data>Querying data</a></li>
<li><a href=#remove-data>Remove data</a></li>
<li><a href=#update-data>Update data</a></li>
<li><a href=#where-predicates>Where Predicates</a></li>
</ul>
<h2 id=usage>Usage</h2>
<p>Run <code>go run .</code> or <code>go build .</code>, as you like.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>$ go run .

Starting tcp server on localhost:8080
</code></pre></div><p>You can connect using a socket once it has started like so:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>nc localhost 8080
</code></pre></div><h2 id=storing-and-querying-data>Storing and Querying Data</h2>
<p>Rygel stores JSON document items in collections.</p>
<p>All commands can be sent over socket. To test them individually, you may pipe time:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=nb>echo</span> <span class=s1>&#39;{ &#34;operation&#34;: &#34;DEFINE COLLECTION&#34;, &#34;collection_name&#34;: &#34;test_collection&#34; }&#39;</span> <span class=p>|</span> nc localhost <span class=m>8080</span>
</code></pre></div><h2 id=defining-collections>Defining Collections</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>{</span> 
  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=s2>&#34;DEFINE COLLECTION&#34;</span><span class=p>,</span>
  <span class=nt>&#34;collection_name&#34;</span><span class=p>:</span> <span class=s2>&#34;collection_name&#34;</span>
<span class=p>}</span>
</code></pre></div><p>Creates a new collection where document items may be stored.</p>
<h2 id=removing-collections>Removing Collections</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>{</span> 
  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=s2>&#34;REMOVE COLLECTION&#34;</span><span class=p>,</span>
  <span class=nt>&#34;collection_name&#34;</span><span class=p>:</span> <span class=s2>&#34;collection_name&#34;</span>
<span class=p>}</span>
</code></pre></div><p>Removes a collection from the datbase. This removes all stored JSON document items within it.</p>
<h2 id=storing-data>Storing Data</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>{</span> 
  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=s2>&#34;STORE&#34;</span><span class=p>,</span>
  <span class=nt>&#34;collection_name&#34;</span><span class=p>:</span> <span class=s2>&#34;collection_name&#34;</span><span class=p>,</span>
  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span><span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=s2>&#34;structure of document&#34;</span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Stores a document item in a collection. Data can be any valid JSON structure.</p>
<h2 id=querying-data>Querying data</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>{</span> 
  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=s2>&#34;FETCH&#34;</span><span class=p>,</span>
  <span class=nt>&#34;collection_name&#34;</span><span class=p>:</span> <span class=s2>&#34;collection_name&#34;</span><span class=p>,</span>
  <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
  <span class=nt>&#34;where&#34;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=nt>&#34;path&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>],</span> <span class=nt>&#34;operator&#34;</span><span class=p>:</span> <span class=s2>&#34;=&#34;</span><span class=p>,</span> <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;new value&#34;</span> <span class=p>}</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div><p>Queries for data in a collection. The <code>limit</code> parameter is optional and if provided, will stop looking for items after it has reached it&rsquo;s limit.</p>
<p>Rygel can query for data based on certain criteria, named where predicates. Each where predicate is defined used:</p>
<ul>
<li><code>path</code> an array of keys, with each key being a step into a nested structure. The value for the last key is used in the comparison.</li>
<li><code>operator</code> how the value is compared.</li>
<li><code>value</code> what the value is expected to be to match.</li>
</ul>
<p>Given the following data:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=p>{</span>
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;DEFINE COLLECTION&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span>
<span class=p>}</span>
<span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;STORE&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;data&#34;</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;key&#34;</span><span class=o>:</span><span class=s2>&#34;apple&#34;</span><span class=p>,</span><span class=s2>&#34;color&#34;</span><span class=o>:</span><span class=s2>&#34;red&#34;</span><span class=p>}</span>
<span class=p>}</span>
<span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;STORE&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;data&#34;</span><span class=o>:</span> <span class=p>{</span><span class=s2>&#34;key&#34;</span><span class=o>:</span><span class=s2>&#34;orange&#34;</span><span class=p>,</span><span class=s2>&#34;color&#34;</span><span class=o>:</span><span class=s2>&#34;orange&#34;</span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Querying for a single document would look like:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;FETCH&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;limit&#34;</span><span class=o>:</span> <span class=mi>1</span>
<span class=p>}</span>
</code></pre></div><blockquote>
<p>[{&ldquo;color&rdquo;:&ldquo;orange&rdquo;,&ldquo;key&rdquo;:&ldquo;orange&rdquo;}]</p>
</blockquote>
<p>Querying for all documents that meet a criteria:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;FETCH&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;where&#34;</span><span class=o>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=s2>&#34;path&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;color&#34;</span><span class=p>],</span> <span class=s2>&#34;operator&#34;</span><span class=o>:</span> <span class=s2>&#34;=&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span> <span class=p>},</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div><blockquote>
<p>[{&ldquo;color&rdquo;:&ldquo;red&rdquo;,&ldquo;key&rdquo;:&ldquo;apple&rdquo;}]</p>
</blockquote>
<p>It&rsquo;s possible to query based on deep properties and multiple WHERE clauses:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;STORE&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;data&#34;</span><span class=o>:</span> <span class=p>{</span>
    <span class=s2>&#34;key&#34;</span><span class=o>:</span> <span class=s2>&#34;dragonfruit&#34;</span><span class=p>,</span>
    <span class=s2>&#34;color&#34;</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span><span class=p>,</span>
    <span class=s2>&#34;properties&#34;</span><span class=o>:</span> <span class=p>{</span>
      <span class=s2>&#34;spikes&#34;</span><span class=o>:</span> <span class=s2>&#34;many&#34;</span><span class=p>,</span>
      <span class=s2>&#34;internal_color&#34;</span><span class=o>:</span> <span class=s2>&#34;white&#34;</span>
    <span class=p>}</span>
  <span class=p>}</span>
<span class=p>}</span>
<span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;FETCH&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;fruits&#34;</span><span class=p>,</span>
  <span class=s2>&#34;where&#34;</span><span class=o>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=s2>&#34;path&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;color&#34;</span><span class=p>],</span> <span class=s2>&#34;operator&#34;</span><span class=o>:</span> <span class=s2>&#34;=&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;red&#34;</span> <span class=p>},</span>
    <span class=p>{</span> <span class=s2>&#34;path&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;properties&#34;</span><span class=p>,</span> <span class=s2>&#34;internal_color&#34;</span><span class=p>],</span> <span class=s2>&#34;operator&#34;</span><span class=o>:</span> <span class=s2>&#34;=&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=s2>&#34;white&#34;</span> <span class=p>},</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div><blockquote>
<p>[{&ldquo;color&rdquo;:&ldquo;red&rdquo;,&ldquo;key&rdquo;:&ldquo;dragonfruit&rdquo;,&ldquo;properties&rdquo;:{&ldquo;internal_color&rdquo;:&ldquo;white&rdquo;,&ldquo;spikes&rdquo;:&ldquo;many&rdquo;}}]</p>
</blockquote>
<h2 id=remove-data>Remove data</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=p>{</span> 
  <span class=s2>&#34;operation&#34;</span><span class=o>:</span> <span class=s2>&#34;REMOVE ITEMS&#34;</span><span class=p>,</span>
  <span class=s2>&#34;collection_name&#34;</span><span class=o>:</span> <span class=s2>&#34;test_collection&#34;</span><span class=p>,</span>
  <span class=s2>&#34;limit&#34;</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
  <span class=s2>&#34;where&#34;</span><span class=o>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=s2>&#34;path&#34;</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;amount&#34;</span><span class=p>],</span> <span class=s2>&#34;operator&#34;</span><span class=o>:</span> <span class=s2>&#34;&gt;&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=o>:</span> <span class=mi>1000</span> <span class=p>},</span>
  <span class=p>]</span>
<span class=p>}</span>
</code></pre></div><p>Removes JSON document items from a collection. Limit is optional.</p>
<h2 id=update-data>Update data</h2>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>{</span> 
  <span class=nt>&#34;operation&#34;</span><span class=p>:</span> <span class=s2>&#34;UPDATE ITEM&#34;</span><span class=p>,</span>
  <span class=nt>&#34;collection_name&#34;</span><span class=p>:</span> <span class=s2>&#34;test_collection&#34;</span><span class=p>,</span>
  <span class=nt>&#34;limit&#34;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
  <span class=nt>&#34;where&#34;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span> <span class=nt>&#34;path&#34;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&#34;foo&#34;</span><span class=p>],</span> <span class=nt>&#34;operator&#34;</span><span class=p>:</span> <span class=s2>&#34;=&#34;</span><span class=p>,</span> <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;bar&#34;</span> <span class=p>}</span>
  <span class=p>],</span>
  <span class=nt>&#34;data&#34;</span><span class=p>:</span> <span class=p>{</span><span class=nt>&#34;foo&#34;</span><span class=p>:</span> <span class=s2>&#34;YOTZ!&#34;</span><span class=p>}</span>
<span class=p>}</span>
</code></pre></div><p>Updates JSON items in a collection. Works with where predicates and limit is optional.</p>
<p>Note, this command <em>replaces</em> the data structure and is not an deep merge of the two data objects.</p>
<h2 id=where-predicates>Where Predicates</h2>
<p>Where predicates can compare strings, integers, and booleans.</p>
<p>They provide a number of different operators useful for these value types:</p>
<ul>
<li><code>=</code> asserts if the value on path is equal to the expected value.</li>
<li><code>!=</code> refutes if value on path is equal to the expected value.</li>
<li><code>></code> compares if value on path is greater than expected value.</li>
<li><code>>=</code> compares if value on path is greater than or equal to the expected value.</li>
<li><code>&lt;</code> compares if value on path is less than the expected value.</li>
<li><code>&lt;=</code> compares if value on path is less than or equal to the expected value.</li>
</ul>
<hr>
<blockquote>
<p>May your afterlife be almost as pleasant as mine. - Dominar Rygel the XVI</p>
</blockquote>
</div>
<div class=footer>
<div class=footer-social>
<span class="social-icon social-icon-github">
<a href=https://github.com/apiercey title=github target=_blank rel=noopener>
<img src=/images/social/github.svg width=24 height=24 alt=github>
</a>
</span>
<span class="social-icon social-icon-linkedin">
<a href=https://www.linkedin.com/in/alexander-butt-piercey title=linkedin target=_blank rel=noopener>
<img src=/images/social/linkedin.svg width=24 height=24 alt=linkedin>
</a>
</span>
</div>
</div>
</div>
<script type=text/javascript src=/js/bundle.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.js></script>
</body>
</html>